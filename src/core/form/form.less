/**
 * fieldset
 */

fieldset + fieldset {
  .margin(top, big);
}

/**
 * legend
 */

legend {
  .block();
  .h4();
  .header--line();
}

/**
 * form
 */

form {
  // default options
  .form--default(); // .form-label .form-item
  .form--medium(); // .form-group
}

/**
 * form-group
 */

// size

.form-group--small {
  .margin(bottom, 1em);
  font-size: 1.1rem;
}

.form--small {
  .form-groups({ .form-group--small(); });
}

.form-group--medium {
  .margin(bottom, 1.5em);
  font-size: 1.3rem;
}

.form--medium {
  .form-groups({ .form-group--medium(); });
}

.form-group--big {
  .margin(bottom, 1.5em);
  font-size: 1.5rem;
}

.form--big {
  .form-groups({ .form-group--big(); });
}

// addons

.form-group--row {
  @media @min-sm {
    display: flex;
    .row-space--x(medium);
  }
}

.form-group--horizontal {
  @media @min-sm {
    display: flex;
    .row-space--x(medium);
    align-items: center;
    text-align: right;
    .form-label {
      margin: 0;
    }
  }
}

.form-group--inline {
  @media @min-sm {
    display: flex;
    flex-wrap: wrap;
    .list-space--x(medium);
    align-items: baseline;
    .form-item {
      width: auto;
    }
  }
}

/**
 * form-label
 */

.form-label {
  .margin(bottom, 1em); // size in em inherit .form-group size
  .font-sans--semibold();
  font-size: 1em; // size in em inherit .form-group size
  line-height: 1.2;
  letter-spacing: .025em;
  text-transform: uppercase;
}

// variant

.form-label--default {
  color: @gray-500;
}

.form--default {
  .form-labels({ .form-label--default(); });
}

.form-label--inverse {
  color: @text-inverse;
}

.form--inverse {
  .form-labels({ .form-label--inverse(); });
}

/**
 * form-item
 */

.form-item {
  border-radius: .5em;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  padding: .75em 1.2em; // size in em inherit .form-group size
  .font-sans--regular();
  font-size: 1em; // size in em inherit .form-group size
  line-height: 1.4;
}

// variant

.form-item--default {
  border-color: @gray-200;
  background-color: @gray-200; // @FIX no background: or it overrides background-image
  color: @text;
  &:focus, &.active {
    border-color: @gray-200--dark;
    background-color: @gray-200--dark; // @FIX no background: or it overrides background-image
  }
  // placeholder
  &:-ms-input-placeholder {
    color: @gray-500;
  }
  &:-moz-placeholder {
    color: @gray-500;
  }
  &::-webkit-input-placeholder {
    color: @gray-500;
  }
  &::-ms-input-placeholder {
    color: @gray-500;
  }
  &::-moz-placeholder {
    color: @gray-500;
  }
  &::placeholder {
    color: @gray-500;
  }
}

.form--default {
  .form-items({ .form-item--default(); });
}

.form-item--inverse {
  border-color: fade(@gray-800, 20%);
  background-color: fade(@gray-800, 20%); // @FIX no background: or it overrides background-image
  color: @text-inverse--dark;
  &:focus, &.active {
    border-color: fade(@gray-800, 40%);
    background-color: fade(@gray-800, 40%); // @FIX no background: or it overrides background-image
  }
  // placeholder
  &:-ms-input-placeholder {
    color: @text-inverse;
  }
  &:-moz-placeholder {
    color: @text-inverse;
  }
  &::-webkit-input-placeholder {
    color: @text-inverse;
  }
  &::-ms-input-placeholder {
    color: @text-inverse;
  }
  &::-moz-placeholder {
    color: @text-inverse;
  }
  &::placeholder {
    color: @text-inverse;
  }
}

.form--inverse {
  .form-items({ .form-item--inverse(); });
}

// animation

.form-item {
  transition-property: color, border, background-color;
  transition-duration: @time-giant;
  transition-timing-function: @bez-out;
  &:focus, &.active {
    transition-property: color, border, background-color;
    transition-duration: @time-giant;
    transition-timing-function: @bez-in;
  }
}

/**
 * select
 */

.form-item {
  select:not([multiple])& {
    @select-arrow-color: @text-inverse;
    @select-space-color: fade(@gray-800, 20%);
    background-image: linear-gradient(45deg, transparent 50%, @select-arrow-color 50%), linear-gradient(135deg, @select-arrow-color 50%, transparent 50%), linear-gradient(to right, @select-space-color, @select-space-color);
  }
  select[multiple]& {
    padding: 0;
    option {
      padding: .5rem 1rem;
    }
  }
}

/**
 * check and radio
 */

// label

.checkradio-label {
  .margin(all, none); // reset .form-label
  .padding(left, small); // space from checkbox/radio
  .font-sans--regular();
  font-size: 1em;
  line-height: 1.2;
  letter-spacing: 0;
  text-transform: none;
  // disabled
  &.disabled {
    opacity: 1;
    &:before {
      background: darken(@gray-200, 2.5%) !important;
      border: 1px solid darken(@gray-200, 2.5%) !important;
    }
    &:after {
      color: darken(@gray-200, 25%) !important;
    }
  }
}

// styled

.checkbox, .radio {
  padding-left: 3rem;
  &:before, &:after {
    width: 1.8rem;
    height: 1.8rem;
  }
  &:before {
    background: @gray-200;
    border: 1px solid @gray-300;
  }
  &:after {
    color: @accent;
  }
}

.checkbox {
  &:before {
    border-radius: 4px;
  }
  &:after {
    .icon-xt();
    content: @icon-xt-check;
    font-size: 100%;
  }
}

.radio {
  &:before {
    border-radius: 50%;
  }
  &:after {
    .icon-xt();
    content: @icon-xt-circle;
    font-size: 50%;
  }
}

// pseudo

input[type="checkbox"]:not(.unstyled) {
  // focus
  &:focus ~ .form-label {
    .checkbox.focus();
  }
  // active
  &:checked ~ .form-label {
    .checkbox.active();
  }
  // disabled
  &:disabled ~ .form-label {
    .checkradio-label.disabled();
  }
}

input[type="radio"]:not(.unstyled) {
  // focus
  &:focus ~ .form-label {
    .radio.focus();
  }
  // active
  &:checked ~ .form-label {
    .radio.active();
  }
  // disabled
  &:disabled ~ .form-label {
    .checkradio-label.disabled();
  }
}

// animation

.checkbox, .radio {
  &:before {
    transform: scale(.9, .9);
    transition-property: all;
    transition-duration: @time-medium;
    transition-timing-function: @bez-out;
  }
  &:after {
    opacity: 0 !important;
    transform: scale(.9, .5);
    transition-property: all;
    transition-duration: @time-medium;
    transition-timing-function: @bez-out;
  }
  &.focus, &:focus {
    &:before {
      border: 1px solid @accent;
    }
  }
  &.active {
    &:before {
      transform: scale(1, 1);
      transition-property: all;
      transition-duration: @time-medium;
      transition-timing-function: @bez-in;
    }
    &:after {
      opacity: 1 !important;
      transform: scale(1, 1);
      transition-property: all;
      transition-duration: @time-medium;
      transition-timing-function: @bez-in;
    }
  }
}

/**
 * form-text
 */

.form-text {
  .note();
  .note--default();
  .note--small();
  .muted();
}

/**
 * validation
 */

.form-item {
  &:invalid {
    box-shadow: none !important;
  }
}
